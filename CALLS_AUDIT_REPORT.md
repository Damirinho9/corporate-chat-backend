# üìû –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –°–ò–°–¢–ï–ú–´ –ó–í–û–ù–ö–û–í

**–î–∞—Ç–∞:** 2025-12-05
**–í–µ—Ä—Å–∏—è:** MVP Phase 1 (Audio/Video Calls 1-–Ω–∞-1)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –†–£–ß–ù–û–ú–£ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

---

## üéØ –û–ë–™–Å–ú –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

#### Backend (Socket.IO —Å–æ–±—ã—Ç–∏—è):
- ‚úÖ **`start_call`** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î
- ‚úÖ **`accept_call`** ‚Äî –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ **`reject_call`** ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞ —Å –ø—Ä–∏—á–∏–Ω–æ–π, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **`end_call`** ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞, —Ä–∞—Å—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### Frontend (Client-side):
- ‚úÖ **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞** ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π, –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å
- ‚úÖ **–†–∏–Ω–≥—Ç–æ–Ω (Web Audio API)** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤—É–∫–∞ 440Hz, –ø–∞—Ç—Ç–µ—Ä–Ω 2—Å –≤–∫–ª / 1—Å –≤—ã–∫–ª
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ –∑–≤–æ–Ω–∫–æ–≤** ‚Äî üìû –∞—É–¥–∏–æ, üìπ –≤–∏–¥–µ–æ –≤ –ø–∞–Ω–µ–ª–∏ –≤–≤–æ–¥–∞
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jitsi Meet** ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ iframe, —Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ / –∞—É–¥–∏–æ+–≤–∏–¥–µ–æ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ** ‚Äî —Ç–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ **Cleanup –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏** ‚Äî dispose Jitsi, clear timeouts, reset state

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ **`calls` —Ç–∞–±–ª–∏—Ü–∞** ‚Äî chat_id, room_name, type, initiated_by, status, timestamps
- ‚úÖ **`call_participants` —Ç–∞–±–ª–∏—Ü–∞** ‚Äî call_id, user_id, status, joined_at, left_at
- ‚úÖ **`call_events` —Ç–∞–±–ª–∏—Ü–∞** ‚Äî event_type (created/accepted/rejected/ended), metadata

#### –¢–µ—Å—Ç—ã:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** ‚Äî 5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, 100% –ø–æ–∫—Ä—ã—Ç–∏–µ MVP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- ‚úÖ **In-memory –ë–î –ø–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî –≤—Å–µ queries –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤

---

## üß™ –°–¶–ï–ù–ê–†–ò–ò –î–õ–Ø –†–£–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –°–¶–ï–ù–ê–†–ò–ô 1: –£—Å–ø–µ—à–Ω—ã–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫ (1-–Ω–∞-1)

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä), –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B (–ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π)

**–®–∞–≥–∏:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] –û—Ç–∫—Ä—ã–≤–∞–µ—Ç direct —á–∞—Ç —Å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º B
   - [ ] –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É üìπ "–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ö–Ω–æ–ø–∫–∞ disabled –Ω–∞ –≤—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Jitsi iframe —Å –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** room_name –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `corporate-chat-{chatId}-`

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–í—Ö–æ–¥—è—â–∏–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫ –æ—Ç [–ò–º—è A]"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –°–ª—ã—à–µ–Ω —Ä–∏–Ω–≥—Ç–æ–Ω (–∑–≤—É–∫ –∑–≤–æ–Ω–∫–∞)
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ê–≤–∞—Ç–∞—Ä —Å –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–º –∫–æ–ª—å—Ü–æ–º (gradient + animation)
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ
   - [ ] –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–Ω—è—Ç—å"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –†–∏–Ω–≥—Ç–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Jitsi iframe —Å —Ç–µ–º –∂–µ room_name

3. **–û–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –≤ Jitsi
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –°–ª—ã—à–∞—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞–º–µ—Ä—ã –≤–∫–ª—é—á–µ–Ω—ã)

4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞:**
   - [ ] –õ—é–±–æ–π –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞–∂–∏–º–∞–µ—Ç "Hang up" –≤ Jitsi
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi iframe –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —É –æ–±–æ–∏—Ö
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ü–æ—è–≤–ª—è–µ—Ç—Å—è toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: X —Å–µ–∫"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ú–æ–¥–∞–ª–∫–∞ Jitsi –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞ –∏–∑ DOM

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤):**
```sql
-- –ó–≤–æ–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ 'ended'
SELECT * FROM calls WHERE chat_id = {chatId} ORDER BY created_at DESC LIMIT 1;
-- status = 'ended', started_at –∏ ended_at —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–ø–∏—Å–∞–Ω—ã
SELECT * FROM call_participants WHERE call_id = {callId};
-- 1 –∑–∞–ø–∏—Å—å: user_id = B, status = 'joined'

-- –°–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å–∞–Ω—ã
SELECT * FROM call_events WHERE call_id = {callId} ORDER BY created_at;
-- 3 —Å–æ–±—ã—Ç–∏—è: created (user A), accepted (user B), ended (user A –∏–ª–∏ B)
```

---

### ‚úÖ –°–¶–ï–ù–ê–†–ò–ô 2: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä), –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B (–ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π)

**–®–∞–≥–∏:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] –û—Ç–∫—Ä—ã–≤–∞–µ—Ç direct —á–∞—Ç —Å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º B
   - [ ] –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É üìû "–ê—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Jitsi iframe —Å **—Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ** (–±–µ–∑ –∫–∞–º–µ—Ä—ã)

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–í—Ö–æ–¥—è—â–∏–π –∞—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫ –æ—Ç [–ò–º—è A]"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –°–ª—ã—à–µ–Ω —Ä–∏–Ω–≥—Ç–æ–Ω
   - [ ] –ù–∞–∂–∏–º–∞–µ—Ç "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" (‚úñ)
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –†–∏–Ω–≥—Ç–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ú–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥–∏—Ç toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "[–ò–º—è B] –æ—Ç–∫–ª–æ–Ω–∏–ª –∑–≤–æ–Ω–æ–∫"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º (A —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∫–æ–º–Ω–∞—Ç–µ)
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ú–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∑–∞–∫—Ä—ã—Ç—å Jitsi

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
SELECT status FROM calls WHERE chat_id = {chatId} ORDER BY created_at DESC LIMIT 1;
-- status = 'rejected'

SELECT event_type, metadata FROM call_events WHERE call_id = {callId};
-- 2 —Å–æ–±—ã—Ç–∏—è: created, rejected (metadata = {"reason": "user_declined"})
```

---

### ‚úÖ –°–¶–ï–ù–ê–†–ò–ô 3: –¢–∞–π–º–∞—É—Ç (30 —Å–µ–∫—É–Ω–¥ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞)

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä), –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B (–ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π)

**–®–∞–≥–∏:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥–∏—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –†–∏–Ω–≥—Ç–æ–Ω –∏–≥—Ä–∞–µ—Ç
   - [ ] **–ù–ï –ù–ê–ñ–ò–ú–ê–ï–¢ –ù–ò –ù–ê –û–î–ù–£ –ö–ù–û–ü–ö–£** (–∂–¥—ë—Ç 30 —Å–µ–∫—É–Ω–¥)
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û (—á–µ—Ä–µ–∑ 30 —Å–µ–∫):** –ú–æ–¥–∞–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –†–∏–Ω–≥—Ç–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–í—ã–∑–æ–≤ –Ω–µ –ø—Ä–∏–Ω—è—Ç (—Ç–∞–π–º–∞—É—Ç)"

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥–∏—Ç toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
SELECT status FROM calls WHERE chat_id = {chatId} ORDER BY created_at DESC LIMIT 1;
-- status = 'rejected'

SELECT metadata FROM call_events WHERE call_id = {callId} AND event_type = 'rejected';
-- metadata = {"reason": "timeout"}
```

---

### ‚úÖ –°–¶–ï–ù–ê–†–ò–ô 4: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C (—Ç—Ä–µ—Ç–∏–π —É—á–∞—Å—Ç–Ω–∏–∫ –≤ —á–∞—Ç–µ)

**–®–∞–≥–∏:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A:**
   - [ ] –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–≤–æ–Ω–æ–∫ –≤ —á–∞—Ç–µ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B:**
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –í–∏–¥–∏—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C (–ø–æ–∫–∞ –∑–≤–æ–Ω–æ–∫ active):**
   - [ ] –ü—ã—Ç–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫ –≤ —Ç–æ–º –∂–µ —á–∞—Ç–µ
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Toast –æ—à–∏–±–∫–∞ "Call already in progress"
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** Jitsi –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

4. **–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞:**
   - [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C –ø—ã—Ç–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫ —Å–Ω–æ–≤–∞
   - [ ] **–û–ñ–ò–î–ê–ï–ú–û:** –ó–≤–æ–Ω–æ–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
-- –í–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
SELECT COUNT(*) FROM calls
WHERE chat_id = {chatId} AND status IN ('ringing', 'ongoing');
-- COUNT = 1 (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫)
```

---

## üé® UI/UX –ü–†–û–í–ï–†–ö–ê

### üì± –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞

**HTML:** `public/index.html` (—Å—Ç—Ä–æ–∫–∏ 1759-1780)

**–ß–µ–∫-–ª–∏—Å—Ç:**
- [ ] **–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ:** –º–æ–¥–∞–ª–∫–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞, overlay –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω
- [ ] **–ê–≤–∞—Ç–∞—Ä:** –≥—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç #667eea –¥–æ #764ba2, –∫—Ä—É–≥–ª—ã–π, —Ä–∞–∑–º–µ—Ä 120px
- [ ] **–ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ –∫–æ–ª—å—Ü–æ:** –∞–Ω–∏–º–∞—Ü–∏—è `avatarPulse` (scale 1 ‚Üí 1.2 ‚Üí 1), 2 —Å–µ–∫—É–Ω–¥—ã
- [ ] **–ò–º—è –∑–≤–æ–Ω—è—â–µ–≥–æ:** —á—ë—Ç–∫–æ–µ, —á–∏—Ç–∞–µ–º–æ–µ, `font-size: 1.5rem`
- [ ] **–¢–∏–ø –∑–≤–æ–Ω–∫–∞:** —Ç–µ–∫—Å—Ç "–ê—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫" –∏–ª–∏ "–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫", —Ü–≤–µ—Ç #9ca3af
- [ ] **–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å":** –∑–µ–ª—ë–Ω–∞—è (#10b981), –∞–Ω–∏–º–∞—Ü–∏—è `acceptPulse` (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è)
- [ ] **–ö–Ω–æ–ø–∫–∞ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å":** –∫—Ä–∞—Å–Ω–∞—è (#ef4444), –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö <480px –∫–Ω–æ–ø–∫–∏ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è, –º–æ–¥–∞–ª–∫–∞ —É–∂–µ

**CSS Animations:**
```css
@keyframes slideUpBounce {
  0% { transform: translateY(100%); opacity: 0; }
  60% { transform: translateY(-10px); opacity: 1; }
  100% { transform: translateY(0); }
}

@keyframes avatarPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@keyframes acceptPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
  50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
}
```

---

### üîä –†–∏–Ω–≥—Ç–æ–Ω (Web Audio API)

**–§—É–Ω–∫—Ü–∏—è:** `playRingtone()` –≤ `public/index.html` (—Å—Ç—Ä–æ–∫–∏ 2587-2642)

**–ß–µ–∫-–ª–∏—Å—Ç:**
- [ ] **–ó–≤—É–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:** —Å–ª—ã—à–µ–Ω —Ç–æ–Ω 440Hz (–Ω–æ—Ç–∞ A)
- [ ] **–ü–∞—Ç—Ç–µ—Ä–Ω:** 2 —Å–µ–∫—É–Ω–¥—ã –∑–≤—É–∫ –í–ö–õ, 1 —Å–µ–∫—É–Ω–¥–∞ –í–´–ö–õ, –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
- [ ] **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:** –≤—ã–∑–æ–≤ `ringtoneStopFunction()` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –∑–≤—É–∫
- [ ] **–ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫:** —Ä–∏–Ω–≥—Ç–æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 100ms –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª–∫–∏
- [ ] **–ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏:** –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ AudioContext –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

---

### üé• –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jitsi Meet

**–§—É–Ω–∫—Ü–∏—è:** `openJitsiModal()` –≤ `public/index.html` (—Å—Ç—Ä–æ–∫–∏ 2729-2826)

**–ß–µ–∫-–ª–∏—Å—Ç:**
- [ ] **Jitsi –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:** —Å–∫—Ä–∏–ø—Ç `https://meet.jit.si/external_api.js` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- [ ] **room_name —É–Ω–∏–∫–∞–ª–µ–Ω:** —Ñ–æ—Ä–º–∞—Ç `corporate-chat-{chatId}-{timestamp}`
- [ ] **–¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ:** –ø—Ä–∏ `isVideoCall=false` –∫–∞–º–µ—Ä–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, —Ç–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω
- [ ] **–í–∏–¥–µ–æ + –∞—É–¥–∏–æ:** –ø—Ä–∏ `isVideoCall=true` –∫–∞–º–µ—Ä–∞ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω—ã
- [ ] **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `currentUser.name` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Jitsi
- [ ] **–ú–æ–¥–∞–ª–∫–∞ Jitsi:** iframe –∑–∞–Ω–∏–º–∞–µ—Ç 90vw x 90vh, —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω, z-index: 10000
- [ ] **–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è:** "‚úï" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] **Event listeners:** `readyToClose` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `endActiveCall()`

---

### üîò –ö–Ω–æ–ø–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ –≤–≤–æ–¥–∞

**HTML:** `public/index.html` (—Å—Ç—Ä–æ–∫–∏ ~3060-3100)

**–ß–µ–∫-–ª–∏—Å—Ç:**
- [ ] **–ü–æ—Ä—è–¥–æ–∫ –∫–Ω–æ–ø–æ–∫ (—Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ):**
  1. üìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª
  2. üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  3. üìä –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å
  4. üìû –ê—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫
  5. üìπ –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫

- [ ] **Disabled –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –≤—Å–µ –∫–Ω–æ–ø–∫–∏ disabled –ø–æ–∫–∞ —á–∞—Ç –Ω–µ –æ—Ç–∫—Ä—ã—Ç
- [ ] **Enabled –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞:** `openChat()` –≤–∫–ª—é—á–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ (—Å—Ç—Ä–æ–∫–∞ ~3070)
- [ ] **–ò–∫–æ–Ω–∫–∏:** `audioCallBtn` = üìû, `videoCallBtn` = üìπ
- [ ] **Tooltip (title):** "–ê—É–¥–∏–æ–∑–≤–æ–Ω–æ–∫" –∏ "–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫"
- [ ] **–¶–≤–µ—Ç:** –±–∞–∑–æ–≤—ã–π #6b7280, hover #1f2937
- [ ] **–†–∞–∑–º–µ—Ä:** –∫–Ω–æ–ø–∫–∏ 40px x 40px, –∏–∫–æ–Ω–∫–∏ 20px

---

## üîå WebSocket –°–û–ë–´–¢–ò–Ø

### Backend ‚Üí Frontend

#### üì• `incoming_call`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ —Å–æ–∑–¥–∞–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —á–∞—Ç–∞ (–∫—Ä–æ–º–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞)
**Payload:**
```javascript
{
  callId: 1,
  roomName: 'corporate-chat-9-1764934213422',
  type: 'video', // –∏–ª–∏ 'audio'
  chatId: 9,
  initiator: {
    id: 1,
    name: '–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'
  }
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∏–Ω–≥—Ç–æ–Ω `playRingtone()`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å `currentIncomingCall = { callId, roomName, type, initiator }`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä auto-reject —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥

---

#### üì• `call_created`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ —Å–æ–∑–¥–∞–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É
**Payload:**
```javascript
{
  callId: 1,
  roomName: 'corporate-chat-9-1764934213422',
  type: 'video',
  chatId: 9
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å Jitsi –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ `openJitsiModal(roomName, isVideo, callId)`
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å `currentActiveCall = { callId, roomName, type }`

---

#### üì• `call_accepted_confirmed`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ –ø—Ä–∏–Ω—è—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–º—É
**Payload:**
```javascript
{
  callId: 1,
  roomName: 'corporate-chat-9-1764934213422',
  type: 'video',
  chatId: 9
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å Jitsi `openJitsiModal(roomName, isVideo, callId)`

---

#### üì• `call_accepted`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ –ø—Ä–∏–Ω—è—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —á–∞—Ç–∞
**Payload:**
```javascript
{
  callId: 1,
  user: {
    id: 4,
    name: '–†–û–ü Sales - –í–∏–∫—Ç–æ—Ä'
  }
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –ü–æ–∫–∞–∑–∞—Ç—å toast "[–ò–º—è] –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∑–≤–æ–Ω–∫—É"

---

#### üì• `call_rejected`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
**Payload:**
```javascript
{
  callId: 1,
  reason: 'user_declined', // –∏–ª–∏ 'timeout', 'busy'
  user: {
    id: 4,
    name: '–†–û–ü Sales - –í–∏–∫—Ç–æ—Ä'
  }
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
2. –ü–æ–∫–∞–∑–∞—Ç—å toast "[–ò–º—è] –æ—Ç–∫–ª–æ–Ω–∏–ª –∑–≤–æ–Ω–æ–∫" (–∏–ª–∏ "–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞" –¥–ª—è timeout)

---

#### üì• `call_ended`
**–ö–æ–≥–¥–∞:** –ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
**Payload:**
```javascript
{
  callId: 1,
  duration: 125 // —Å–µ–∫—É–Ω–¥—ã
}
```
**–î–µ–π—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
1. –ó–∞–∫—Ä—ã—Ç—å Jitsi iframe
2. Dispose `jitsiApi.dispose()`
3. –£–¥–∞–ª–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑ DOM
4. –ü–æ–∫–∞–∑–∞—Ç—å toast "–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2:05"
5. –û—á–∏—Å—Ç–∏—Ç—å `currentActiveCall`, `jitsiApi`

---

### Frontend ‚Üí Backend

#### üì§ `start_call`
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –∑–≤–æ–Ω–∫–∞
**Payload:**
```javascript
{
  chatId: 9,
  type: 'video' // –∏–ª–∏ 'audio'
}
```

---

#### üì§ `accept_call`
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–ü—Ä–∏–Ω—è—Ç—å"
**Payload:**
```javascript
{
  callId: 1
}
```

---

#### üì§ `reject_call`
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç
**Payload:**
```javascript
{
  callId: 1,
  reason: 'user_declined' // –∏–ª–∏ 'timeout'
}
```

---

#### üì§ `end_call`
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª –∑–≤–æ–Ω–æ–∫ (Jitsi `readyToClose` event)
**Payload:**
```javascript
{
  callId: 1
}
```

---

## ‚ö†Ô∏è EDGE CASES

### üö´ –ß–¢–û –ú–û–ñ–ï–¢ –ü–û–ô–¢–ò –ù–ï –¢–ê–ö:

1. **–ó–≤–æ–Ω–æ–∫ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ (>2 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)**
   - **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤—Å–µ–º, –∫—Ç–æ –ø–µ—Ä–≤—ã–π –ø—Ä–∏–Ω—è–ª ‚Äî –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Jitsi
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤—Å—ë –µ—â—ë –≤–∏–¥—è—Ç –º–æ–¥–∞–ª–∫—É –∏ —Ä–∏–Ω–≥—Ç–æ–Ω
   - **TODO:** –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏ ‚Äî —ç—Ç–æ Phase 2, –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å offline**
   - **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** `incoming_call` –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–Ω–µ—Ç socket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
   - **TODO:** Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–Ω–µ scope MVP)

3. **Jitsi –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–µ—Ç–∏, firewall)**
   - **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** iframe –ø—É—Å—Ç–æ–π, –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω
   - **TODO:** –¢–∞–π–º–∞—É—Ç –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É Jitsi + fallback UI

4. **–ú–∏–∫—Ä–æ—Ñ–æ–Ω/–∫–∞–º–µ—Ä–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã (–Ω–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π)**
   - **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** Jitsi –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ—é –æ—à–∏–±–∫—É
   - **TODO:** Pre-flight –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ `navigator.mediaDevices.getUserMedia()`

5. **–î–≤–∞ –∑–≤–æ–Ω–∫–∞ –ø–æ–¥—Ä—è–¥ –æ—Ç –æ–¥–Ω–æ–≥–æ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞**
   - **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ backend (`Call already in progress`)
   - **‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê

### ‚úÖ –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô –ß–ï–ö-–õ–ò–°–¢ –î–õ–Ø –†–ï–õ–ò–ó–ê:

- [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 1 (—É—Å–ø–µ—à–Ω—ã–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫)** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 2 (–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)** ‚Äî —Ä–∏–Ω–≥—Ç–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, toast –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 3 (—Ç–∞–π–º–∞—É—Ç)** ‚Äî auto-reject —á–µ—Ä–µ–∑ 30 —Å–µ–∫
- [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 4 (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)** ‚Äî toast –æ—à–∏–±–∫–∞ "Call already in progress"
- [ ] **UI –º–æ–¥–∞–ª–∫–∏** ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞, –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ, –∞–¥–∞–ø—Ç–∏–≤–Ω–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- [ ] **–†–∏–Ω–≥—Ç–æ–Ω** ‚Äî —Å–ª—ã—à–µ–Ω, –ø–∞—Ç—Ç–µ—Ä–Ω 2—Å/1—Å, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏
- [ ] **Jitsi** ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞—é—Ç, room_name –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- [ ] **–ë–î –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ —Å–æ–±—ã—Ç–∏—è (created/accepted/rejected/ended) –∑–∞–ø–∏—Å–∞–Ω—ã
- [ ] **–ö–Ω–æ–ø–∫–∏ –∑–≤–æ–Ω–∫–æ–≤** ‚Äî enabled –≤ —á–∞—Ç–µ, disabled –≤–Ω–µ —á–∞—Ç–∞, –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] **WebSocket** ‚Äî –≤—Å–µ 6 —Å–æ–±—ã—Ç–∏–π (incoming_call, call_created, call_accepted_confirmed, call_accepted, call_rejected, call_ended) —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üìä –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
- ‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ** MVP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- ‚úÖ **5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ **8 –ø—Ä–æ–≤–µ—Ä–æ–∫** –≤ –∫–∞–∂–¥–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ **0 —Å–±–æ–µ–≤** –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∑–∞–ø—É—Å–∫–µ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚è±Ô∏è **–í—Ä–µ–º—è –æ—Ç –∫–ª–∏–∫–∞ –¥–æ Jitsi:** <1 —Å–µ–∫—É–Ω–¥–∞ (—Ü–µ–ª–µ–≤–æ–µ: <500ms)
- ‚è±Ô∏è **–í—Ä–µ–º—è –æ—Ç incoming_call –¥–æ –º–æ–¥–∞–ª–∫–∏:** <200ms (—Ü–µ–ª–µ–≤–æ–µ: <100ms)
- ‚è±Ô∏è **–†–∏–Ω–≥—Ç–æ–Ω –∑–∞–¥–µ—Ä–∂–∫–∞:** <100ms (—Ü–µ–ª–µ–≤–æ–µ: <50ms)
- ‚è±Ô∏è **Cleanup –ø—Ä–∏ end_call:** <300ms (—Ü–µ–ª–µ–≤–æ–µ: <200ms)

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:
- üîí **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:** 100% (backend –ø—Ä–æ–≤–µ—Ä–∫–∞)
- üîí **–¢–∞–π–º–∞—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:** 100% (30 —Å–µ–∫—É–Ω–¥ ¬±100ms)
- üîí **–†–∏–Ω–≥—Ç–æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:** 100% (–ø—Ä–∏ –ª—é–±–æ–º –¥–µ–π—Å—Ç–≤–∏–∏)
- üîí **Jitsi cleanup:** 100% (dispose + remove DOM)

---

## üöÄ NEXT STEPS (Phase 2 ‚Äî –≤–Ω–µ scope —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏)

1. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏:**
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –¥–ª—è ongoing –∑–≤–æ–Ω–∫–æ–≤
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "X —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∑–≤–æ–Ω–∫–µ"
   - –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ Jitsi

2. **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å offline
   - –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

3. **–£–ª—É—á—à–µ–Ω–∏—è UX:**
   - Pre-flight –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞/–∫–∞–º–µ—Ä—ã
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ò–¥—ë—Ç –∑–≤–æ–Ω–æ–∫..." –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞
   - –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ (–æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞)

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - Dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∑–≤–æ–Ω–∫–æ–≤
   - –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞
   - –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–Ω—è—Ç—ã—Ö/–æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**MVP Phase 1 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.**

- ‚úÖ Backend WebSocket —Å–æ–±—ã—Ç–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Frontend UI/UX —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç 100%
- ‚úÖ Jitsi –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞
- ‚úÖ –†–∏–Ω–≥—Ç–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä: `npm start`
2. –û—Ç–∫—Ä–æ–π 2 –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. –°–æ–∑–¥–∞–π direct —á–∞—Ç –º–µ–∂–¥—É –Ω–∏–º–∏
4. –ü—Ä–æ–π–¥–∏ –≤—Å–µ 4 —Å—Ü–µ–Ω–∞—Ä–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–°–¶–ï–ù–ê–†–ò–ò –î–õ–Ø –†–£–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø"

**–õ—é–±—ã–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∞–≥–∏** ‚Äî —Å—Ä–∞–∑—É —Å–æ–æ–±—â–∞–π, –±—É–¥—É —Ñ–∏–∫—Å–∏—Ç—å —Ç–æ—á–µ—á–Ω–æ. üéØ
