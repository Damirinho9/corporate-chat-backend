# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ Beget

## –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ https://chat.gyda.ru

### 1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH

```bash
ssh YOUR_LOGIN@YOUR_SERVER.beget.tech
```

### 2Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
cd ~/
git clone https://github.com/Damirinho9/corporate-chat-backend.git
cd corporate-chat-backend
git checkout claude/fix-department-constraint-error-011CUtZUCdctYjUTCafCKnTw
```

### 3Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ –ë–î —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Beget

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Beget
2. –†–∞–∑–¥–µ–ª **"MySQL –∏ PostgreSQL"** ‚Üí **"–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **PostgreSQL**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä
cp .env.production.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ:**
- `YOUR_DB_USER` ‚Üí –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
- `YOUR_DB_PASSWORD` ‚Üí –ø–∞—Ä–æ–ª—å –ë–î
- `YOUR_DB_NAME` ‚Üí –∏–º—è –ë–î
- `JWT_SECRET` ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"`
- `JWT_REFRESH_SECRET` ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á

### 5Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install --production
```

### 6Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
node setup-db.js

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
node database/migrate.js 010_fix_department_constraint.sql
```

### 7Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
node check-production-env.js
```

–ï—Å–ª–∏ –≤—Å–µ –û–ö ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.

### 8Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø–∞–Ω–µ–ª–∏ Beget

1. –ü–∞–Ω–µ–ª—å Beget ‚Üí **"Node.js"** ‚Üí **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**

2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞**: `/home/YOUR_LOGIN/corporate-chat-backend`
   - **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `server.js`
   - **–†–µ–∂–∏–º**: `Production`
   - **–í–µ—Ä—Å–∏—è Node.js**: `18.x` –∏–ª–∏ –≤—ã—à–µ

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `.env`

4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"** –∏ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"**

### 9Ô∏è‚É£ –ü—Ä–∏–≤—è–∂–∏—Ç–µ –¥–æ–º–µ–Ω

1. –ü–∞–Ω–µ–ª—å Beget ‚Üí **"–°–∞–π—Ç—ã –∏ –¥–æ–º–µ–Ω—ã"** ‚Üí –¥–æ–º–µ–Ω `chat.gyda.ru`

2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞ ‚Üí **"Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–æ—Ä—Ç: `3000`

3. –í–∫–ª—é—á–∏—Ç–µ **SSL (Let's Encrypt)**

### üîü –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **https://chat.gyda.ru**

**–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥:**
- Username: `admin`
- Password: `admin123`

‚ö†Ô∏è **–°—Ä–∞–∑—É —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!**

---

## üìù –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
cat ~/corporate-chat-backend/logs/*.log
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ –ø–∞–Ω–µ–ª–∏

**SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ DNS –¥–æ–º–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Beget

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd ~/corporate-chat-backend
git pull
npm install --production
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø–∞–Ω–µ–ª–∏ Beget
```

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª `DEPLOYMENT_BEGET.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
