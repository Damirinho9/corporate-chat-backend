# Восстановление базового набора пользователей

Скрипт `scripts/restore_production_snapshot.js` наполняет базу данных тем же набором
пользователей, что показан на скриншоте с административной панелью. Он
подходит для случаев, когда рабочая база была очищена тестовыми данными и
нужно вернуть исходную раскладку отделов.

## Состав набора

Создаются следующие учётные записи (логин / пароль):

- `admin` / `9Jmnd&ok5hWG`
- `assist1` / `Xf6DSC^qjXQ+`
- `assist2` / `Qaf4Ez8x(*&5`
- `rop1` / `mYHsF#GkuZhF`
- `op1a` / `88roSxd_UiLH`
- `op1b` / `pc#KrNCoi#Zw`
- `rop2` / `GC##!DC$by_Y`
- `op2a` / `NHR$mMohWx5@`
- `rop3` / `LxF39kSFV73r`
- `op3a` / `(jgcLe2jNwEp`

Админы и ассистенты не привязаны к отделам. Каждый РОП и его операторы
оказываются в своём отделе и автоматически добавляются в чат отдела с тем
же названием.

## Как запустить

1. Убедитесь, что переменные подключения к PostgreSQL заданы в `.env`.
2. Остановите запущенный сервер (`pm2 stop corporate-chat` или `npm stop`).
3. Выполните команду:
   ```bash
   npm run restore:snapshot
   ```
4. Перезапустите сервер (`pm2 start corporate-chat` или `npm start`).

Скрипт очищает связанные таблицы (`users`, `chats`, `chat_participants`,
`messages`, историю удалений и т.д.) и заполняет их заново. Для каждого
пользователя сохраняется хэшированный пароль и значение `initial_password`,
чтобы администраторы могли видеть и копировать пароль в панели управления.

## Примечания

- Скрипт безопасно завершает транзакцию и откатывает изменения при ошибке.
- В консоль выводится список созданных пользователей и их паролей.
- Автоматические тесты продолжают использовать `database/seed.js`, поэтому
  поведение тестового окружения не меняется.
